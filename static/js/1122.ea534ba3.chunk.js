"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[1122],{27406:(e,n,t)=>{t.d(n,{A:()=>b});var r=t(68102),o=t(49257),i=t(80905),s=t(96742),a=t(98557),l={modified:{doc:""},original:{doc:""}},d=(0,i.createContext)(l);function c(e,n){return(0,r.A)({},e,n,{modified:(0,r.A)({},e.modified,n.modified),original:(0,r.A)({},e.original,n.original)})}var u=()=>(0,i.useContext)(d),h=e=>{var{children:n,theme:t}=e,[o,s]=(0,i.useReducer)(c,(0,r.A)({},l,{theme:t}));return(0,i.useEffect)(()=>s({theme:t}),[t]),(0,a.jsx)(d.Provider,{value:(0,r.A)({},o,{dispatch:s}),children:n})},f=["extensions","value","selection","onChange"],g=e=>{var{extensions:n=[],value:t,selection:a,onChange:l}=e,d=(0,o.A)(e,f),{theme:c,dispatch:h}=u(),g=(0,s.IA)((0,r.A)({},d,{theme:c}));return(0,i.useEffect)(()=>h({original:{doc:t,selection:a,extensions:[...g,...n]},originalExtension:{onChange:l,option:d,extension:[n]}}),[e]),null};g.displayName="CodeMirrorMerge.Original";var v=["extensions","value","selection","onChange"],m=e=>{var{extensions:n=[],value:t,selection:a,onChange:l}=e,d=(0,o.A)(e,v),{theme:c,dispatch:h}=u(),f=(0,s.IA)((0,r.A)({},d,{theme:c}));return(0,i.useEffect)(()=>{h({modified:{doc:t,selection:a,extensions:[...f,...n]},modifiedExtension:{onChange:l,option:d,extension:[n]}})},[e]),null};m.displayName="CodeMirrorMerge.Modified";var C=t(60125),p=t(67538),x=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl","diffConfig","root"],A=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],w=i.forwardRef((e,n)=>{var{className:t,children:l,orientation:d,revertControls:c,highlightChanges:h,gutter:f,collapseUnchanged:g,destroyRerender:v=!0,renderRevertControl:m,diffConfig:w,root:y}=e,j=(0,o.A)(e,x),b=u(),{modified:E,modifiedExtension:R,original:M,originalExtension:I,theme:S,dispatch:k}=b,N=(0,o.A)(b,A),U=(0,i.useRef)(null),L=(0,i.useRef)(),O={orientation:d,revertControls:c,highlightChanges:h,gutter:f,collapseUnchanged:g,renderRevertControl:m,diffConfig:w,root:y};(0,i.useImperativeHandle)(n,()=>({container:U.current,view:L.current,modified:E,original:M,config:(0,r.A)({a:M,b:E,parent:U.current},O)}),[U,L,E,M,O]);var z=p.Lz.updateListener.of(e=>{if(e.docChanged&&"function"===typeof(null==I?void 0:I.onChange)){var n=e.state.doc.toString();null==I||I.onChange(n,e)}}),D=p.Lz.updateListener.of(e=>{if(e.docChanged&&"function"===typeof(null==R?void 0:R.onChange)){var n=e.state.doc.toString();null==R||R.onChange(n,e)}});(0,i.useEffect)(()=>{!L.current&&U.current&&I&&R&&(L.current=new C.SV((0,r.A)({a:(0,r.A)({},M,{extensions:[...(null==I?void 0:I.extension)||[],...(0,s.IA)((0,r.A)({},null==I?void 0:I.option,{theme:S})),z]}),b:(0,r.A)({},E,{extensions:[...(null==R?void 0:R.extension)||[],...(0,s.IA)((0,r.A)({},null==R?void 0:R.option,{theme:S})),D]}),parent:U.current},O)),k({view:L.current}))},[L,U,I,R]),(0,i.useEffect)(()=>{if(M&&M.doc&&L.current){var e,n,t=null==(e=L.current)?void 0:e.a.state.doc.toString();if(t!==M.doc)null==(n=L.current)||n.a.dispatch({changes:{from:0,to:t.length,insert:M.doc||""}})}if(E&&E.doc&&L.current){var o,i,a=null==(o=L.current)?void 0:o.b.state.doc.toString();if(a!==E.doc)null==(i=L.current)||i.b.dispatch({changes:{from:0,to:a.length,insert:E.doc||""}})}if(v&&L.current){var l=L.current.a.state.selection.ranges[0].from,d=L.current.b.state.selection.ranges[0].from;L.current.destroy(),L.current=new C.SV((0,r.A)({a:(0,r.A)({},M,{extensions:[...(null==I?void 0:I.extension)||[],...(0,s.IA)((0,r.A)({},null==I?void 0:I.option,{theme:S}))]}),b:(0,r.A)({},E,{extensions:[...(null==R?void 0:R.extension)||[],...(0,s.IA)((0,r.A)({},null==R?void 0:R.option,{theme:S}))]}),parent:U.current},O)),l&&(L.current.a.focus(),L.current.a.dispatch({selection:{anchor:l,head:l}})),d&&(L.current.b.focus(),L.current.b.dispatch({selection:{anchor:d,head:d}}))}},[L,S,U.current,M,E,I,R,v]),(0,i.useEffect)(()=>()=>L.current&&L.current.destroy(),[]),(0,i.useEffect)(()=>{if(L.current){var e={};N.orientation!==d&&(e.orientation=d),N.revertControls!==c&&(e.revertControls=c),N.highlightChanges!==h&&(e.highlightChanges=h),N.gutter!==f&&(e.gutter=f),N.collapseUnchanged!==g&&(e.collapseUnchanged=g),N.renderRevertControl!==m&&(e.collapseUnchanged=g),Object.keys(e).length&&k&&L.current&&(L.current.reconfigure((0,r.A)({},e)),k((0,r.A)({},e)))}},[k,L,d,c,h,f,g,m]);return(0,a.jsx)("div",(0,r.A)({ref:U,className:"cm-merge-theme"+(t?" "+t:"")},j,{children:l}))});w.displayName="CodeMirrorMerge.Internal";var y=["theme"],j=i.forwardRef((e,n)=>{var{theme:t}=e,i=(0,o.A)(e,y);return(0,a.jsx)(h,{theme:t,children:(0,a.jsx)(w,(0,r.A)({},i,{ref:n}))})});j.Original=g,j.Modified=m,j.displayName="CodeMirrorMerge";const b=j},41122:(e,n,t)=>{t.r(n),t.d(n,{Component:()=>f});var r=t(80905),o=t(67538),i=t(8070),s=t(27406),a=t(98557);const l=s.A.Original,d=s.A.Modified;let c="one\ntwo\nthree\nfour\nfive";const u=o.Z9.fromClass(class{update(e){e.docChanged&&console.log("Document changed! test 1")}}),h=o.Z9.fromClass(class{update(e){e.docChanged&&console.log("Document changed! test 2")}});function f(){return(0,a.jsx)(r.Fragment,{children:(0,a.jsx)(g,{})})}function g(){const[e,n]=(0,r.useState)(c),[t,o]=(0,r.useState)(c),f=(0,r.useRef)(null);return(0,a.jsxs)("div",{style:{width:"100%"},children:[(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>{var e,n;null===(e=f.current)||void 0===e||null===(n=e.view)||void 0===n||n.a.dispatch({effects:i.Pe.appendConfig.of([h])})},children:"Add extension 2"})}),(0,a.jsxs)(s.A,{ref:f,destroyRerender:!1,children:[(0,a.jsx)(l,{value:e,extensions:[u],onChange:e=>{n(e)}}),(0,a.jsx)(d,{value:t,onChange:e=>{o(e)}})]}),(0,a.jsxs)("div",{style:{display:"flex",marginTop:10},children:[(0,a.jsxs)("pre",{style:{flex:1},children:[e," "]}),(0,a.jsxs)("pre",{style:{backgroundColor:"#fff",flex:1},children:[t," "]})]})]})}}}]);
//# sourceMappingURL=1122.ea534ba3.chunk.js.map