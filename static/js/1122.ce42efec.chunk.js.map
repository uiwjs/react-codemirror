{"version":3,"file":"static/js/1122.ce42efec.chunk.js","mappings":"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","sources":["pages/examples/Example681.tsx","../../merge/esm/store.js","../../merge/esm/Original.js","../../merge/esm/Modified.js","../../merge/esm/Internal.js","../../merge/esm/index.js"],"sourcesContent":["import { Fragment, useRef, useState } from 'react';\nimport { ViewPlugin, ViewUpdate } from '@codemirror/view';\nimport { StateEffect } from '@codemirror/state';\nimport CodeMirrorMerge, { type CodeMirrorMergeRef } from 'react-codemirror-merge';\n\nconst Original = CodeMirrorMerge.Original;\nconst Modified = CodeMirrorMerge.Modified;\nlet doc = `one\ntwo\nthree\nfour\nfive`;\n\nconst log1UpdatePlugin = ViewPlugin.fromClass(\n  class {\n    update(update: ViewUpdate) {\n      if (update.docChanged) {\n        console.log('Document changed! test 1');\n      }\n    }\n  },\n);\n\nconst log2UpdatePlugin = ViewPlugin.fromClass(\n  class {\n    update(update: ViewUpdate) {\n      if (update.docChanged) {\n        console.log('Document changed! test 2');\n      }\n    }\n  },\n);\n\n/**\n * https://github.com/uiwjs/react-codemirror/issues/681#issuecomment-2341521112\n */\nexport function Component() {\n  return (\n    <Fragment>\n      <Example />\n    </Fragment>\n  );\n}\n\nfunction Example() {\n  const [value, setValue] = useState(doc);\n  const [valueModified, setValueModified] = useState(doc);\n  const $ref = useRef<CodeMirrorMergeRef>(null);\n  const handle1 = () => {\n    $ref.current?.view?.a.dispatch({\n      effects: StateEffect.appendConfig.of([log2UpdatePlugin]),\n    });\n  };\n  return (\n    <div style={{ width: '100%' }}>\n      <div>\n        <button onClick={handle1}>Add extension 2</button>\n      </div>\n      <CodeMirrorMerge ref={$ref} destroyRerender={false}>\n        <Original\n          value={value}\n          extensions={[log1UpdatePlugin]}\n          onChange={(val) => {\n            setValue(val);\n          }}\n        />\n        <Modified\n          value={valueModified}\n          onChange={(val) => {\n            setValueModified(val);\n          }}\n        />\n      </CodeMirrorMerge>\n      <div style={{ display: 'flex', marginTop: 10 }}>\n        <pre style={{ flex: 1 }}>{value} </pre>\n        <pre style={{ backgroundColor: '#fff', flex: 1 }}>{valueModified} </pre>\n      </div>\n    </div>\n  );\n}\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { createContext, useContext, useEffect, useReducer } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var initialState = {\n  modified: {\n    doc: ''\n  },\n  original: {\n    doc: ''\n  }\n};\nexport var Context = /*#__PURE__*/createContext(initialState);\nexport function reducer(state, action) {\n  return _extends({}, state, action, {\n    modified: _extends({}, state.modified, action.modified),\n    original: _extends({}, state.original, action.original)\n  });\n}\nexport var useStore = () => {\n  return useContext(Context);\n};\nexport var Provider = _ref => {\n  var {\n    children,\n    theme\n  } = _ref;\n  var [state, dispatch] = useReducer(reducer, _extends({}, initialState, {\n    theme\n  }));\n  useEffect(() => dispatch({\n    theme\n  }), [theme]);\n  return /*#__PURE__*/_jsx(Context.Provider, {\n    value: _extends({}, state, {\n      dispatch\n    }),\n    children: children\n  });\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"extensions\", \"value\", \"selection\", \"onChange\"];\nimport { useEffect } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { useStore } from \"./store.js\";\nexport var Original = props => {\n  var {\n      extensions = [],\n      value,\n      selection,\n      onChange\n    } = props,\n    otherOption = _objectWithoutPropertiesLoose(props, _excluded);\n  var {\n    theme,\n    dispatch\n  } = useStore();\n  var defaultExtensions = getDefaultExtensions(_extends({}, otherOption, {\n    theme\n  }));\n  useEffect(() => dispatch({\n    original: {\n      doc: value,\n      selection: selection,\n      extensions: [...defaultExtensions, ...extensions]\n    },\n    originalExtension: {\n      onChange,\n      option: otherOption,\n      extension: [extensions]\n    }\n  }), [props]);\n  return null;\n};\nOriginal.displayName = 'CodeMirrorMerge.Original';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"extensions\", \"value\", \"selection\", \"onChange\"];\nimport { useEffect } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { useStore } from \"./store.js\";\nexport var Modified = props => {\n  var {\n      extensions = [],\n      value,\n      selection,\n      onChange\n    } = props,\n    otherOption = _objectWithoutPropertiesLoose(props, _excluded);\n  var {\n    theme,\n    dispatch\n  } = useStore();\n  var defaultExtensions = getDefaultExtensions(_extends({}, otherOption, {\n    theme\n  }));\n  useEffect(() => {\n    dispatch({\n      modified: {\n        doc: value,\n        selection: selection,\n        extensions: [...defaultExtensions, ...extensions]\n      },\n      modifiedExtension: {\n        onChange,\n        option: otherOption,\n        extension: [extensions]\n      }\n    });\n  }, [props]);\n  return null;\n};\nModified.displayName = 'CodeMirrorMerge.Modified';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"children\", \"orientation\", \"revertControls\", \"highlightChanges\", \"gutter\", \"collapseUnchanged\", \"destroyRerender\", \"renderRevertControl\", \"diffConfig\", \"root\"],\n  _excluded2 = [\"modified\", \"modifiedExtension\", \"original\", \"originalExtension\", \"theme\", \"dispatch\"];\nimport React, { useEffect, useImperativeHandle, useRef } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { MergeView } from '@codemirror/merge';\nimport { useStore } from \"./store.js\";\nimport { EditorView } from '@codemirror/view';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var Internal = /*#__PURE__*/React.forwardRef((props, ref) => {\n  var {\n      className,\n      children,\n      orientation,\n      revertControls,\n      highlightChanges,\n      gutter,\n      collapseUnchanged,\n      destroyRerender = true,\n      renderRevertControl,\n      diffConfig,\n      root\n    } = props,\n    elmProps = _objectWithoutPropertiesLoose(props, _excluded);\n  var _useStore = useStore(),\n    {\n      modified,\n      modifiedExtension,\n      original,\n      originalExtension,\n      theme,\n      dispatch\n    } = _useStore,\n    otherStore = _objectWithoutPropertiesLoose(_useStore, _excluded2);\n  var editor = useRef(null);\n  var view = useRef();\n  var opts = {\n    orientation,\n    revertControls,\n    highlightChanges,\n    gutter,\n    collapseUnchanged,\n    renderRevertControl,\n    diffConfig,\n    root\n  };\n  useImperativeHandle(ref, () => ({\n    container: editor.current,\n    view: view.current,\n    modified,\n    original,\n    config: _extends({\n      a: original,\n      b: modified,\n      parent: editor.current\n    }, opts)\n  }), [editor, view, modified, original, opts]);\n  var originalUpdateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof (originalExtension == null ? void 0 : originalExtension.onChange) === 'function') {\n      var doc = vu.state.doc;\n      var val = doc.toString();\n      originalExtension == null || originalExtension.onChange(val, vu);\n    }\n  });\n  var modifiedUpdateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof (modifiedExtension == null ? void 0 : modifiedExtension.onChange) === 'function') {\n      var doc = vu.state.doc;\n      var val = doc.toString();\n      modifiedExtension == null || modifiedExtension.onChange(val, vu);\n    }\n  });\n  useEffect(() => {\n    if (!view.current && editor.current && originalExtension && modifiedExtension) {\n      view.current = new MergeView(_extends({\n        a: _extends({}, original, {\n          extensions: [...((originalExtension == null ? void 0 : originalExtension.extension) || []), ...getDefaultExtensions(_extends({}, originalExtension == null ? void 0 : originalExtension.option, {\n            theme\n          })), originalUpdateListener]\n        }),\n        b: _extends({}, modified, {\n          extensions: [...((modifiedExtension == null ? void 0 : modifiedExtension.extension) || []), ...getDefaultExtensions(_extends({}, modifiedExtension == null ? void 0 : modifiedExtension.option, {\n            theme\n          })), modifiedUpdateListener]\n        }),\n        parent: editor.current\n      }, opts));\n      dispatch({\n        view: view.current\n      });\n    }\n  }, [view, editor, originalExtension, modifiedExtension]);\n  useEffect(() => {\n    if (original && original.doc && view.current) {\n      var _view$current;\n      var originalDoc = (_view$current = view.current) == null ? void 0 : _view$current.a.state.doc.toString();\n      if (originalDoc !== original.doc) {\n        var _view$current2;\n        (_view$current2 = view.current) == null || _view$current2.a.dispatch({\n          changes: {\n            from: 0,\n            to: originalDoc.length,\n            insert: original.doc || ''\n          }\n          // effects: StateEffect.reconfigure.of([\n          //   ...(originalExtension?.extension || []),\n          //   ...getDefaultExtensions({ ...originalExtension?.option, theme }),\n          // ])\n        });\n      }\n    }\n    if (modified && modified.doc && view.current) {\n      var _view$current3;\n      var modifiedDoc = (_view$current3 = view.current) == null ? void 0 : _view$current3.b.state.doc.toString();\n      if (modifiedDoc !== modified.doc) {\n        var _view$current4;\n        (_view$current4 = view.current) == null || _view$current4.b.dispatch({\n          changes: {\n            from: 0,\n            to: modifiedDoc.length,\n            insert: modified.doc || ''\n          }\n          // effects: StateEffect.reconfigure.of([\n          //   ...(modifiedExtension?.extension || []),\n          //   ...getDefaultExtensions({ ...modifiedExtension?.option, theme }),\n          // ])\n        });\n      }\n    }\n    if (destroyRerender && view.current) {\n      var originalFrom = view.current.a.state.selection.ranges[0].from;\n      var modifiedFrom = view.current.b.state.selection.ranges[0].from;\n      view.current.destroy();\n      view.current = new MergeView(_extends({\n        a: _extends({}, original, {\n          extensions: [...((originalExtension == null ? void 0 : originalExtension.extension) || []), ...getDefaultExtensions(_extends({}, originalExtension == null ? void 0 : originalExtension.option, {\n            theme\n          }))]\n        }),\n        b: _extends({}, modified, {\n          extensions: [...((modifiedExtension == null ? void 0 : modifiedExtension.extension) || []), ...getDefaultExtensions(_extends({}, modifiedExtension == null ? void 0 : modifiedExtension.option, {\n            theme\n          }))]\n        }),\n        parent: editor.current\n      }, opts));\n      if (originalFrom) {\n        view.current.a.focus();\n        view.current.a.dispatch({\n          selection: {\n            anchor: originalFrom,\n            head: originalFrom\n          }\n        });\n      }\n      if (modifiedFrom) {\n        view.current.b.focus();\n        view.current.b.dispatch({\n          selection: {\n            anchor: modifiedFrom,\n            head: modifiedFrom\n          }\n        });\n      }\n    }\n  }, [view, theme, editor.current, original, modified, originalExtension, modifiedExtension, destroyRerender]);\n  useEffect(() => () => view.current && view.current.destroy(), []);\n  useEffect(() => {\n    if (view.current) {\n      var _opts = {};\n      if (otherStore.orientation !== orientation) {\n        _opts.orientation = orientation;\n      }\n      if (otherStore.revertControls !== revertControls) {\n        _opts.revertControls = revertControls;\n      }\n      if (otherStore.highlightChanges !== highlightChanges) {\n        _opts.highlightChanges = highlightChanges;\n      }\n      if (otherStore.gutter !== gutter) {\n        _opts.gutter = gutter;\n      }\n      if (otherStore.collapseUnchanged !== collapseUnchanged) {\n        _opts.collapseUnchanged = collapseUnchanged;\n      }\n      if (otherStore.renderRevertControl !== renderRevertControl) {\n        _opts.collapseUnchanged = collapseUnchanged;\n      }\n      if (Object.keys(_opts).length && dispatch && view.current) {\n        view.current.reconfigure(_extends({}, _opts));\n        dispatch(_extends({}, _opts));\n      }\n    }\n  }, [dispatch, view, orientation, revertControls, highlightChanges, gutter, collapseUnchanged, renderRevertControl]);\n  var defaultClassNames = 'cm-merge-theme';\n  return /*#__PURE__*/_jsx(\"div\", _extends({\n    ref: editor,\n    className: \"\" + defaultClassNames + (className ? \" \" + className : '')\n  }, elmProps, {\n    children: children\n  }));\n});\nInternal.displayName = 'CodeMirrorMerge.Internal';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"theme\"];\nimport React from 'react';\nimport { Original } from \"./Original.js\";\nimport { Modified } from \"./Modified.js\";\nimport { Internal } from \"./Internal.js\";\nimport { Provider } from \"./store.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar InternalCodeMirror = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var {\n      theme\n    } = _ref,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  return /*#__PURE__*/_jsx(Provider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsx(Internal, _extends({}, props, {\n      ref: ref\n    }))\n  });\n});\nvar CodeMirrorMerge = InternalCodeMirror;\nCodeMirrorMerge.Original = Original;\nCodeMirrorMerge.Modified = Modified;\nCodeMirrorMerge.displayName = 'CodeMirrorMerge';\nexport default CodeMirrorMerge;"],"names":["Original","CodeMirrorMerge","Modified","doc","log1UpdatePlugin","ViewPlugin","fromClass","update","docChanged","console","log","log2UpdatePlugin","Component","_jsx","Fragment","children","Example","value","setValue","useState","valueModified","setValueModified","$ref","useRef","_jsxs","style","width","onClick","handle1","_$ref$current","_$ref$current$view","current","view","a","dispatch","effects","StateEffect","appendConfig","of","ref","destroyRerender","extensions","onChange","val","display","marginTop","flex","backgroundColor","initialState","modified","original","Context","createContext","reducer","state","action","_extends","useStore","useContext","Provider","_ref","theme","useReducer","useEffect","_excluded","props","selection","otherOption","_objectWithoutPropertiesLoose","defaultExtensions","getDefaultExtensions","originalExtension","option","extension","displayName","modifiedExtension","_excluded2","Internal","React","className","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","renderRevertControl","diffConfig","root","elmProps","_useStore","otherStore","editor","opts","useImperativeHandle","container","config","b","parent","originalUpdateListener","EditorView","updateListener","vu","toString","modifiedUpdateListener","MergeView","_view$current","_view$current2","originalDoc","changes","from","to","length","insert","_view$current3","_view$current4","modifiedDoc","originalFrom","ranges","modifiedFrom","destroy","focus","anchor","head","_opts","Object","keys","reconfigure"],"sourceRoot":""}