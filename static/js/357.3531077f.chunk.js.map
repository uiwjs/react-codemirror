{"version":3,"file":"static/js/357.3531077f.chunk.js","mappings":"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","sources":["../../merge/esm/store.js","../../merge/esm/Original.js","../../merge/esm/Modified.js","../../merge/esm/Internal.js","../../merge/esm/index.js","pages/merge/code.ts","pages/merge/Example.tsx","pages/merge/index.tsx","utils/useTheme.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { createContext, useContext, useEffect, useReducer } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var initialState = {\n  modified: {\n    doc: ''\n  },\n  original: {\n    doc: ''\n  }\n};\nexport var Context = /*#__PURE__*/createContext(initialState);\nexport function reducer(state, action) {\n  return _extends({}, state, action, {\n    modified: _extends({}, state.modified, action.modified),\n    original: _extends({}, state.original, action.original)\n  });\n}\nexport var useStore = () => {\n  return useContext(Context);\n};\nexport var Provider = _ref => {\n  var {\n    children,\n    theme\n  } = _ref;\n  var [state, dispatch] = useReducer(reducer, _extends({}, initialState, {\n    theme\n  }));\n  useEffect(() => dispatch({\n    theme\n  }), [theme]);\n  return /*#__PURE__*/_jsx(Context.Provider, {\n    value: _extends({}, state, {\n      dispatch\n    }),\n    children: children\n  });\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"extensions\", \"value\", \"selection\", \"onChange\"];\nimport { useEffect } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { useStore } from \"./store.js\";\nexport var Original = props => {\n  var {\n      extensions = [],\n      value,\n      selection,\n      onChange\n    } = props,\n    otherOption = _objectWithoutPropertiesLoose(props, _excluded);\n  var {\n    theme,\n    dispatch\n  } = useStore();\n  var defaultExtensions = getDefaultExtensions(_extends({}, otherOption, {\n    theme\n  }));\n  useEffect(() => dispatch({\n    original: {\n      doc: value,\n      selection: selection,\n      extensions: [...defaultExtensions, ...extensions]\n    },\n    originalExtension: {\n      onChange,\n      option: otherOption,\n      extension: [extensions]\n    }\n  }), [props]);\n  return null;\n};\nOriginal.displayName = 'CodeMirrorMerge.Original';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"extensions\", \"value\", \"selection\", \"onChange\"];\nimport { useEffect } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { useStore } from \"./store.js\";\nexport var Modified = props => {\n  var {\n      extensions = [],\n      value,\n      selection,\n      onChange\n    } = props,\n    otherOption = _objectWithoutPropertiesLoose(props, _excluded);\n  var {\n    theme,\n    dispatch\n  } = useStore();\n  var defaultExtensions = getDefaultExtensions(_extends({}, otherOption, {\n    theme\n  }));\n  useEffect(() => {\n    dispatch({\n      modified: {\n        doc: value,\n        selection: selection,\n        extensions: [...defaultExtensions, ...extensions]\n      },\n      modifiedExtension: {\n        onChange,\n        option: otherOption,\n        extension: [extensions]\n      }\n    });\n  }, [props]);\n  return null;\n};\nModified.displayName = 'CodeMirrorMerge.Modified';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"children\", \"orientation\", \"revertControls\", \"highlightChanges\", \"gutter\", \"collapseUnchanged\", \"destroyRerender\", \"renderRevertControl\", \"diffConfig\", \"root\"],\n  _excluded2 = [\"modified\", \"modifiedExtension\", \"original\", \"originalExtension\", \"theme\", \"dispatch\"];\nimport React, { useEffect, useImperativeHandle, useRef } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { MergeView } from '@codemirror/merge';\nimport { useStore } from \"./store.js\";\nimport { EditorView } from '@codemirror/view';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var Internal = /*#__PURE__*/React.forwardRef((props, ref) => {\n  var {\n      className,\n      children,\n      orientation,\n      revertControls,\n      highlightChanges,\n      gutter,\n      collapseUnchanged,\n      destroyRerender = true,\n      renderRevertControl,\n      diffConfig,\n      root\n    } = props,\n    elmProps = _objectWithoutPropertiesLoose(props, _excluded);\n  var _useStore = useStore(),\n    {\n      modified,\n      modifiedExtension,\n      original,\n      originalExtension,\n      theme,\n      dispatch\n    } = _useStore,\n    otherStore = _objectWithoutPropertiesLoose(_useStore, _excluded2);\n  var editor = useRef(null);\n  var view = useRef();\n  var opts = {\n    orientation,\n    revertControls,\n    highlightChanges,\n    gutter,\n    collapseUnchanged,\n    renderRevertControl,\n    diffConfig,\n    root\n  };\n  useImperativeHandle(ref, () => ({\n    container: editor.current,\n    view: view.current,\n    modified,\n    original,\n    config: _extends({\n      a: original,\n      b: modified,\n      parent: editor.current\n    }, opts)\n  }), [editor, view, modified, original, opts]);\n  var originalUpdateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof (originalExtension == null ? void 0 : originalExtension.onChange) === 'function') {\n      var doc = vu.state.doc;\n      var val = doc.toString();\n      originalExtension == null || originalExtension.onChange(val, vu);\n    }\n  });\n  var modifiedUpdateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof (modifiedExtension == null ? void 0 : modifiedExtension.onChange) === 'function') {\n      var doc = vu.state.doc;\n      var val = doc.toString();\n      modifiedExtension == null || modifiedExtension.onChange(val, vu);\n    }\n  });\n  useEffect(() => {\n    if (!view.current && editor.current && originalExtension && modifiedExtension) {\n      view.current = new MergeView(_extends({\n        a: _extends({}, original, {\n          extensions: [...((originalExtension == null ? void 0 : originalExtension.extension) || []), ...getDefaultExtensions(_extends({}, originalExtension == null ? void 0 : originalExtension.option, {\n            theme\n          })), originalUpdateListener]\n        }),\n        b: _extends({}, modified, {\n          extensions: [...((modifiedExtension == null ? void 0 : modifiedExtension.extension) || []), ...getDefaultExtensions(_extends({}, modifiedExtension == null ? void 0 : modifiedExtension.option, {\n            theme\n          })), modifiedUpdateListener]\n        }),\n        parent: editor.current\n      }, opts));\n      dispatch({\n        view: view.current\n      });\n    }\n  }, [view, editor, originalExtension, modifiedExtension]);\n  useEffect(() => {\n    if (original && original.doc && view.current) {\n      var _view$current;\n      var originalDoc = (_view$current = view.current) == null ? void 0 : _view$current.a.state.doc.toString();\n      if (originalDoc !== original.doc) {\n        var _view$current2;\n        (_view$current2 = view.current) == null || _view$current2.a.dispatch({\n          changes: {\n            from: 0,\n            to: originalDoc.length,\n            insert: original.doc || ''\n          }\n          // effects: StateEffect.reconfigure.of([\n          //   ...(originalExtension?.extension || []),\n          //   ...getDefaultExtensions({ ...originalExtension?.option, theme }),\n          // ])\n        });\n      }\n    }\n    if (modified && modified.doc && view.current) {\n      var _view$current3;\n      var modifiedDoc = (_view$current3 = view.current) == null ? void 0 : _view$current3.b.state.doc.toString();\n      if (modifiedDoc !== modified.doc) {\n        var _view$current4;\n        (_view$current4 = view.current) == null || _view$current4.b.dispatch({\n          changes: {\n            from: 0,\n            to: modifiedDoc.length,\n            insert: modified.doc || ''\n          }\n          // effects: StateEffect.reconfigure.of([\n          //   ...(modifiedExtension?.extension || []),\n          //   ...getDefaultExtensions({ ...modifiedExtension?.option, theme }),\n          // ])\n        });\n      }\n    }\n    if (destroyRerender && view.current) {\n      var originalFrom = view.current.a.state.selection.ranges[0].from;\n      var modifiedFrom = view.current.b.state.selection.ranges[0].from;\n      view.current.destroy();\n      view.current = new MergeView(_extends({\n        a: _extends({}, original, {\n          extensions: [...((originalExtension == null ? void 0 : originalExtension.extension) || []), ...getDefaultExtensions(_extends({}, originalExtension == null ? void 0 : originalExtension.option, {\n            theme\n          }))]\n        }),\n        b: _extends({}, modified, {\n          extensions: [...((modifiedExtension == null ? void 0 : modifiedExtension.extension) || []), ...getDefaultExtensions(_extends({}, modifiedExtension == null ? void 0 : modifiedExtension.option, {\n            theme\n          }))]\n        }),\n        parent: editor.current\n      }, opts));\n      if (originalFrom) {\n        view.current.a.focus();\n        view.current.a.dispatch({\n          selection: {\n            anchor: originalFrom,\n            head: originalFrom\n          }\n        });\n      }\n      if (modifiedFrom) {\n        view.current.b.focus();\n        view.current.b.dispatch({\n          selection: {\n            anchor: modifiedFrom,\n            head: modifiedFrom\n          }\n        });\n      }\n    }\n  }, [view, theme, editor.current, original, modified, originalExtension, modifiedExtension, destroyRerender]);\n  useEffect(() => () => view.current && view.current.destroy(), []);\n  useEffect(() => {\n    if (view.current) {\n      var _opts = {};\n      if (otherStore.orientation !== orientation) {\n        _opts.orientation = orientation;\n      }\n      if (otherStore.revertControls !== revertControls) {\n        _opts.revertControls = revertControls;\n      }\n      if (otherStore.highlightChanges !== highlightChanges) {\n        _opts.highlightChanges = highlightChanges;\n      }\n      if (otherStore.gutter !== gutter) {\n        _opts.gutter = gutter;\n      }\n      if (otherStore.collapseUnchanged !== collapseUnchanged) {\n        _opts.collapseUnchanged = collapseUnchanged;\n      }\n      if (otherStore.renderRevertControl !== renderRevertControl) {\n        _opts.collapseUnchanged = collapseUnchanged;\n      }\n      if (Object.keys(_opts).length && dispatch && view.current) {\n        view.current.reconfigure(_extends({}, _opts));\n        dispatch(_extends({}, _opts));\n      }\n    }\n  }, [dispatch, view, orientation, revertControls, highlightChanges, gutter, collapseUnchanged, renderRevertControl]);\n  var defaultClassNames = 'cm-merge-theme';\n  return /*#__PURE__*/_jsx(\"div\", _extends({\n    ref: editor,\n    className: \"\" + defaultClassNames + (className ? \" \" + className : '')\n  }, elmProps, {\n    children: children\n  }));\n});\nInternal.displayName = 'CodeMirrorMerge.Internal';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"theme\"];\nimport React from 'react';\nimport { Original } from \"./Original.js\";\nimport { Modified } from \"./Modified.js\";\nimport { Internal } from \"./Internal.js\";\nimport { Provider } from \"./store.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar InternalCodeMirror = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var {\n      theme\n    } = _ref,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  return /*#__PURE__*/_jsx(Provider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsx(Internal, _extends({}, props, {\n      ref: ref\n    }))\n  });\n});\nvar CodeMirrorMerge = InternalCodeMirror;\nCodeMirrorMerge.Original = Original;\nCodeMirrorMerge.Modified = Modified;\nCodeMirrorMerge.displayName = 'CodeMirrorMerge';\nexport default CodeMirrorMerge;","export const originalCode = `// The player has a position, a size, and a current speed.\nclass Player {\n  size = new Vec(0.8, 1.5);\n\n  constructor(pos, speed) {\n    this.pos = pos;\n    this.speed = speed;\n  }\n\n  static create(pos) {\n    return new Player(pos.plus(new Vec(0, -0.5)), new Vec(0, 0));\n  }\n}\n\n// Lava block. When you touch it, you die.\nclass Lava {\n  size = new Vec(1, 1)\n\n  constructor(pos, speed, reset) {\n    this.pos = pos;\n    this.speed = speed;\n    this.reset = reset;\n  }\n\n  static horizontal(pos) {\n    return new Lava(pos, new Vec(2, 0));\n  }\n\n  static vertical(pos) {\n    return new Lava(pos, new Vec(0, 2));\n  }\n\n  static drip(pos) {\n    return new Lava(pos, new Vec(0, 3), pos);\n  }\n}\n`;\n\nexport const modifiedCode = `class Player {\n  get type() { return \"player\" }\n\n  constructor(pos, speed) {\n    this.pos = pos;\n    this.speed = speed;\n  }\n\n  static create(pos) {\n    return new Player(pos.plus(new Vec(0, -0.5)), new Vec(0, 0));\n  }\n}\n\nclass Lava {\n  constructor(pos, speed, reset) {\n    this.pos = pos;\n    this.speed = speed;\n    this.reset = reset;\n  }\n\n  get type() { return \"lava\"; }\n\n  static create(pos, ch) {\n    if (ch == \"=\") {\n      return new Lava(pos, new Vec(2, 0));\n    } else if (ch == \"|\") {\n      return new Lava(pos, new Vec(0, 2));\n    } else if (ch == \"v\") {\n      return new Lava(pos, new Vec(0, 3), pos);\n    }\n  }\n}\n\nPlayer.prototype.size = new Vec(0.8, 1.5);\nLava.prototype.size = new Vec(1, 1);\n`;\n","import { Fragment, useRef, useState } from 'react';\nimport CodeMirrorMerge, { CodeMirrorMergeProps } from 'react-codemirror-merge';\nimport { EditorView } from 'codemirror';\nimport { EditorState } from '@codemirror/state';\nimport { langs } from '@uiw/codemirror-extensions-langs';\nimport { originalCode, modifiedCode } from './code';\nimport { useTheme } from '../../utils/useTheme';\n\nconst Original = CodeMirrorMerge.Original;\nconst Modified = CodeMirrorMerge.Modified;\n\nexport const MergeExample = () => {\n  const [orientation, setOrientation] = useState<CodeMirrorMergeProps['orientation']>('a-b');\n  const [revertControls, setRevertControls] = useState<CodeMirrorMergeProps['revertControls']>();\n  const [highlightChanges, setHighlightChanges] = useState<CodeMirrorMergeProps['highlightChanges']>(true);\n  const [gutter, setGutter] = useState<CodeMirrorMergeProps['gutter']>(true);\n  const [collapseUnchanged, setCollapseUnchanged] = useState<CodeMirrorMergeProps['collapseUnchanged']>({});\n  const { theme } = useTheme();\n  const handleOrientation = (evn: React.ChangeEvent<HTMLSelectElement>) => {\n    setOrientation(evn.target.value as CodeMirrorMergeProps['orientation']);\n  };\n  const [originalValue, setOriginalValue] = useState(originalCode);\n  const random = useRef<number>();\n  const click = () => {\n    random.current = Math.floor(Math.random() * 101);\n    const code = '// hello world' + random.current + '\\n' + originalCode;\n    setOriginalValue(code);\n  };\n  return (\n    <Fragment>\n      <button onClick={click}>Change Original Value {random.current}</button>\n      <CodeMirrorMerge\n        orientation={orientation}\n        revertControls={revertControls}\n        collapseUnchanged={collapseUnchanged}\n        highlightChanges={highlightChanges}\n        gutter={gutter}\n        style={{ height: 300, overflow: 'auto' }}\n        theme={theme}\n      >\n        <Original\n          value={originalValue}\n          extensions={[langs.js()]}\n          onChange={(val) => {\n            // console.log('::::::::::', val)\n          }}\n        />\n        <Modified\n          value={modifiedCode}\n          extensions={[langs.js(), EditorView.editable.of(false), EditorState.readOnly.of(true)]}\n        />\n      </CodeMirrorMerge>\n      <label>\n        Orientation\n        <select onChange={handleOrientation} defaultValue={orientation}>\n          <option value=\"\">please orientation choose</option>\n          <option value=\"a-b\">a-b</option>\n          <option value=\"b-a\">b-a</option>\n        </select>\n      </label>\n      <br />\n      <label>\n        Revert buttons\n        <select\n          defaultValue={revertControls}\n          onChange={(evn) => setRevertControls(evn.target.value as CodeMirrorMergeProps['revertControls'])}\n        >\n          <option value=\"\">please revertControls choose</option>\n          <option value=\"a-to-b\">a-to-b</option>\n          <option value=\"b-to-a\">b-to-a</option>\n        </select>\n      </label>\n      <br />\n      <label>\n        Highlight changes\n        <input\n          type=\"checkbox\"\n          checked={!!highlightChanges}\n          onChange={(evn) => setHighlightChanges(evn.target.checked)}\n        />\n      </label>\n      <br />\n      <label>\n        Gutter markers\n        <input type=\"checkbox\" checked={!!gutter} onChange={(evn) => setGutter(evn.target.checked)} />\n      </label>\n      <label>\n        Collapse unchanged code\n        <input\n          type=\"checkbox\"\n          checked={!!collapseUnchanged}\n          onChange={(evn) => setCollapseUnchanged(evn.target.checked ? {} : undefined)}\n        />\n      </label>\n    </Fragment>\n  );\n};\n","import { Preview } from '../theme/Preview';\nimport { MergeExample } from './Example';\n\nexport const Component = () => {\n  return (\n    <Preview path={() => import('react-codemirror-merge/README.md')}>\n      <MergeExample />\n    </Preview>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { ReactCodeMirrorProps } from '@uiw/react-codemirror';\n\nexport function useTheme(name: ReactCodeMirrorProps['theme'] = 'light') {\n  const dark = document.documentElement.getAttribute('data-color-mode');\n  const [theme, setTheme] = useState<ReactCodeMirrorProps['theme']>(dark === 'dark' ? 'dark' : name);\n  useEffect(() => {\n    setTheme(document.documentElement.getAttribute('data-color-mode') === 'dark' ? 'dark' : 'light');\n    document.addEventListener('colorschemechange', (e) => {\n      setTheme(e.detail.colorScheme as ReactCodeMirrorProps['theme']);\n    });\n  }, []);\n  return { theme, setTheme };\n}\n"],"names":["initialState","modified","doc","original","Context","createContext","reducer","state","action","_extends","useStore","useContext","Provider","_ref","children","theme","dispatch","useReducer","useEffect","_jsx","value","_excluded","Original","props","extensions","selection","onChange","otherOption","_objectWithoutPropertiesLoose","defaultExtensions","getDefaultExtensions","originalExtension","option","extension","displayName","Modified","modifiedExtension","_excluded2","Internal","React","ref","className","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl","diffConfig","root","elmProps","_useStore","otherStore","editor","useRef","view","opts","useImperativeHandle","container","current","config","a","b","parent","originalUpdateListener","EditorView","updateListener","of","vu","docChanged","val","toString","modifiedUpdateListener","MergeView","_view$current","_view$current2","originalDoc","changes","from","to","length","insert","_view$current3","_view$current4","modifiedDoc","originalFrom","ranges","modifiedFrom","destroy","focus","anchor","head","_opts","Object","keys","reconfigure","CodeMirrorMerge","originalCode","MergeExample","setOrientation","useState","setRevertControls","setHighlightChanges","setGutter","setCollapseUnchanged","useTheme","originalValue","setOriginalValue","random","_jsxs","Fragment","onClick","click","Math","floor","code","style","height","overflow","langs","js","editable","EditorState","readOnly","evn","target","defaultValue","type","checked","undefined","Component","Preview","path","name","arguments","dark","document","documentElement","getAttribute","setTheme","addEventListener","e","detail","colorScheme"],"sourceRoot":""}